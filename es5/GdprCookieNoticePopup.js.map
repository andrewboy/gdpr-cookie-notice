{"version":3,"sources":["../src/GdprCookieNoticePopup.js"],"names":["cookieManager","prefix","locale","timeout","_manager","_isNoticeLoaded","_timeout","_pluginPrefix","_locale","en_GB","console","log","_build","window","setTimeout","document","documentElement","classList","add","body","insertAdjacentHTML","getTemplateHtml","_getTemplate","settingsButton","querySelectorAll","acceptButton","addEventListener","e","preventDefault","setEvent","remove","getElementsByClassName","template","data","Object","replace","i","j"],"mappings":";;;;;;;;AAAA;;;;AACA;;AACA;;;;;;;AAGE,kBAAaA,aAAb,EAA4BC,MAA5B,EAAoCC,MAApC,EAA4CC,OAA5C,EAAqD;AAAA;;AACrD;AACA;AACA;AACA;AACA;AACA;AACE,SAAKC,QAAL,GAAgBJ,aAAhB;AACA,SAAKK,eAAL,GAAuB,KAAvB;AACA,SAAKC,QAAL,GAAgBH,UAAUA,OAAV,GAAoB,GAApC;AACA,SAAKI,aAAL,GAAqBN,SAASA,MAAT,GAAkB,oBAAvC;AACA,SAAKO,OAAL,GAAeN,SAASA,MAAT,GAAkBO,gBAAM,QAAN,CAAjC;AACD;;AAED;;;;;;;8BAGWP,M,EAAQ;AACjB,WAAKM,OAAL,GAAeN,MAAf;AACD;;;2BAEO;AAAA;;AACNQ,cAAQC,GAAR,CAAY,MAAZ;AACA,WAAKC,MAAL;;AAEA;AACAC,aAAOC,UAAP,CAAkB,YAAM;AACtBC,iBAASC,eAAT,CAAyBC,SAAzB,CAAmCC,GAAnC,CAAuC,MAAKX,aAAL,GAAqB,SAA5D;AACD,OAFD,EAEG,KAAKD,QAFR;AAGD;;;6BAES;AAAA;;AACR,UAAI,KAAKD,eAAT,EAA0B;AAAE;AAAQ;AACpCU,eAASI,IAAT,CAAcC,kBAAd,CAAiC,WAAjC,EAA8C,KAAKC,eAAL,CAAqB,KAAKC,YAAL,EAArB,EAA0C,KAAKd,OAA/C,CAA9C;AACA,UAAIe,iBAAiBR,SAASS,gBAAT,CAA0B,MAAM,KAAKjB,aAAX,GAA2B,oBAArD,EAA2E,CAA3E,CAArB;AACA,UAAIkB,eAAeV,SAASS,gBAAT,CAA0B,MAAM,KAAKjB,aAAX,GAA2B,kBAArD,EAAyE,CAAzE,CAAnB;;AAEAgB,qBAAeG,gBAAf,CAAgC,OAAhC,EAAyC,UAACC,CAAD,EAAO;AAC9CA,UAAEC,cAAF;AACA,eAAKxB,QAAL,CAAcyB,QAAd,CAAuB,YAAvB;AACD,OAHD;;AAKAJ,mBAAaC,gBAAb,CAA8B,OAA9B,EAAuC,UAACC,CAAD,EAAO;AAC5CA,UAAEC,cAAF;AACA,eAAKxB,QAAL,CAAcyB,QAAd,CAAuB,qBAAvB;AACD,OAHD;;AAKA,WAAKxB,eAAL,GAAuB,IAAvB;AACD;;;2BAEO;AACNU,eAASC,eAAT,CAAyBC,SAAzB,CAAmCa,MAAnC,CAA0C,KAAKvB,aAAL,GAAqB,SAA/D;AACD;;;8BAEU;AACTQ,eAASgB,sBAAT,CAAgC,KAAKxB,aAArC,EAAoD,CAApD,EAAuDuB,MAAvD;AACD;;;mCAEe;AACd;AAOD;;AAED;;;;oCACiBE,Q,EAAUC,I,EAAM;AAC/B,UAAI,OAAOD,QAAP,KAAoB,QAApB,IAAiCC,gBAAgBC,MAArD,EAA8D;AAC5D,eAAOF,SAASG,OAAT,CAAiB,cAAjB,EAAiC,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AACtD,cAAIJ,KAAKI,CAAL,CAAJ,EAAa;AACX,mBAAOJ,KAAKI,CAAL,CAAP;AACD,WAFD,MAEO;AACL,mBAAOD,CAAP;AACD;AACF,SANM,CAAP;AAOD,OARD,MAQO;AACL,eAAO,KAAP;AACD;AACF","file":"GdprCookieNoticePopup.js","sourcesContent":["import { default as en_GB } from './locales/en_GB.js'\r\nimport './sass/notice2/_variables.scss'\r\nimport './sass/notice2/_notice2.scss'\r\n\r\nexport default class {\r\n  constructor (cookieManager, prefix, locale, timeout) {\r\n  // constructor (opts) {\r\n  //   this._isNoticeLoaded = false\r\n  //   this._timeout = opts.timeout ? opts.timeout : 500\r\n  //   this._pluginPrefix = opts.pluginPrefix ? opts.pluginPrefix : 'gdpr-cookie-notice'\r\n  //   this._locale = opts.locale ? opts.locale : en_GB['notice']\r\n  //   this._manager = opts.cookieManager\r\n    this._manager = cookieManager\r\n    this._isNoticeLoaded = false\r\n    this._timeout = timeout ? timeout : 500\r\n    this._pluginPrefix = prefix ? prefix : 'gdpr-cookie-notice'\r\n    this._locale = locale ? locale : en_GB['notice']\r\n  }\r\n\r\n  /*\r\n   * @param Object locale\r\n   */\r\n  setLocale (locale) {\r\n    this._locale = locale\r\n  }\r\n\r\n  show () {\r\n    console.log('show')\r\n    this._build()\r\n\r\n    // Show the notice with a little timeout\r\n    window.setTimeout(() => {\r\n      document.documentElement.classList.add(this._pluginPrefix + '-loaded')\r\n    }, this._timeout)\r\n  }\r\n\r\n  _build () {\r\n    if (this._isNoticeLoaded) { return }\r\n    document.body.insertAdjacentHTML('beforeend', this.getTemplateHtml(this._getTemplate(), this._locale))\r\n    let settingsButton = document.querySelectorAll('.' + this._pluginPrefix + '-nav-item-settings')[0]\r\n    let acceptButton = document.querySelectorAll('.' + this._pluginPrefix + '-nav-item-accept')[0]\r\n\r\n    settingsButton.addEventListener('click', (e) => {\r\n      e.preventDefault()\r\n      this._manager.setEvent('show_modal')\r\n    })\r\n\r\n    acceptButton.addEventListener('click', (e) => {\r\n      e.preventDefault()\r\n      this._manager.setEvent('accept_all_category')\r\n    })\r\n\r\n    this._isNoticeLoaded = true\r\n  }\r\n\r\n  hide () {\r\n    document.documentElement.classList.remove(this._pluginPrefix + '-loaded')\r\n  }\r\n\r\n  destroy () {\r\n    document.getElementsByClassName(this._pluginPrefix)[0].remove()\r\n  }\r\n\r\n  _getTemplate () {\r\n    return `<div class=\"gdpr-cookie-notice\">\r\n    <p class=\"gdpr-cookie-notice-description\">{{description}}</p>\r\n    <nav class=\"gdpr-cookie-notice-nav\">\r\n      <a href=\"#\" class=\"gdpr-cookie-notice-nav-item gdpr-cookie-notice-nav-item-settings\">{{settings}}</a>\r\n      <a href=\"#\" class=\"gdpr-cookie-notice-nav-item gdpr-cookie-notice-nav-item-accept gdpr-cookie-notice-nav-item-btn\">{{accept}}</a>\r\n    </nav>\r\n    </div>`\r\n  }\r\n\r\n  //string, object\r\n  getTemplateHtml (template, data) {\r\n    if (typeof template === 'string' && (data instanceof Object)) {\r\n      return template.replace(/{{([^}]+)}}/g, function (i, j) {\r\n        if (data[j]) {\r\n          return data[j]\r\n        } else {\r\n          return i\r\n        }\r\n      })\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n}"]}