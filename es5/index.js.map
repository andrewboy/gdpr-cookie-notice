{"version":3,"sources":["../src/index.js"],"names":["locales","GdprCookieNotice","options","_categories","categories","_locale","locale","_timeout","timeout","_domain","domain","window","location","hostname","_expiration","expiration","_isCategoriesCheckedByDefault","categoriesCheckedByDefault","_namespace","namespace","_pluginPrefix","pluginPrefix","_implicit","implicit","_cookiesAccepted","_statementUrl","statementUrl","_gdprCookie","GdprCookie","isExists","showNotice","_gdprCookiesEnabledEvt","CustomEvent","detail","get","document","dispatchEvent","globalSettingsButton","querySelectorAll","i","addEventListener","e","preventDefault","showModal","buildNotice","setTimeout","documentElement","classList","add","console","log","getTemplateHtml","body","insertAdjacentHTML","settingsButton","acceptButton","acceptCategories","performance","analytics","marketing","remove","modalHtml","Object","assign","categoryList","querySelector","innerHTML","prefix","checked","input","label","catId","setModalEventListeners","buildModal","closeButton","statementButton","categoryTitles","saveButton","hideModal","open","length","currentTarget","parentNode","toggle","categorySettings","getElementById","isPerformanceAccepted","isAnalyticsAccepted","isMarketingAccepted","set","isNecessaryAccepted","hideNotice","templateKey","data","templateStr","template","replace","j","isImplicit","isAccepted","isCategoriesCheckedByDefault"],"mappings":"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","file":"index.js","sourcesContent":["import { default as template } from './template'\r\nimport * as locales from './locales'\r\nimport './sass/gdpr-cookie-notice.scss'\r\nimport GdprCookie from './GdprCookie'\r\n\r\nclass GdprCookieNotice {\r\n  constructor (options) {\r\n    this._categories = options.categories ? options.categories : []\r\n    this._locale = options.locale ? options.locale : 'hu'\r\n    this._timeout = options.timeout ? options.timeout : 500\r\n    this._domain = options.domain ? options.domain : window.location.hostname\r\n    this._expiration = options.expiration ? options.expiration : 30\r\n    this._isCategoriesCheckedByDefault = options.categoriesCheckedByDefault ? options.categoriesCheckedByDefault : false\r\n    this._namespace = options.namespace ? options.namespace : 'gdprcookienotice'\r\n    this._pluginPrefix = options.pluginPrefix ? options.pluginPrefix : 'gdpr-cookie-notice'\r\n    this._implicit = options.implicit ? options.implicit : false\r\n    this._cookiesAccepted = false\r\n    this._statementUrl = options.statementUrl ? options.statementUrl : ''\r\n    this._gdprCookie = new GdprCookie(this._namespace, this._expiration, this._domain)\r\n\r\n    if (!this._gdprCookie.isExists()) {\r\n      this.showNotice()\r\n\r\n      // if (this._implicit) {\r\n      //   this.acceptOnScroll()\r\n      // }\r\n    } else {\r\n      //   this.deleteCookies(this.getCurrentCookieSelection())\r\n      this._gdprCookiesEnabledEvt = new CustomEvent('gdprCookiesEnabled', {detail: this._gdprCookie.get()})\r\n      document.dispatchEvent(this._gdprCookiesEnabledEvt)\r\n    }\r\n\r\n    // Settings button on the page somewhere\r\n    let globalSettingsButton = document.querySelectorAll('.' + this._pluginPrefix + '-settings-button')\r\n    if (globalSettingsButton) {\r\n      for (let i in globalSettingsButton) {\r\n        globalSettingsButton[i].addEventListener('click', (e) => {\r\n          e.preventDefault()\r\n          this.showModal()\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  //NOTICE =============================================================================================================\r\n\r\n  showNotice () {\r\n    this.buildNotice()\r\n\r\n    // Show the notice with a little timeout\r\n    window.setTimeout(() => {\r\n      document.documentElement.classList.add(this._pluginPrefix + '-loaded')\r\n    }, this._timeout)\r\n  }\r\n\r\n  buildNotice () {\r\n    console.log(this.getTemplateHtml('bar', locales[this._locale]['bar']))\r\n    document.body.insertAdjacentHTML('beforeend', this.getTemplateHtml('bar', locales[this._locale]['bar']))\r\n    let settingsButton = document.querySelectorAll('.' + this._pluginPrefix + '-nav-item-settings')[0]\r\n    let acceptButton = document.querySelectorAll('.' + this._pluginPrefix + '-nav-item-accept')[0]\r\n\r\n    settingsButton.addEventListener('click', (e) => {\r\n      e.preventDefault()\r\n      this.showModal()\r\n    })\r\n\r\n    acceptButton.addEventListener('click', (e) => {\r\n      e.preventDefault()\r\n\r\n      this.acceptCategories(\r\n        !!this._categories.performance,\r\n        !!this._categories.analytics,\r\n        !!this._categories.marketing,\r\n      )\r\n    })\r\n  }\r\n\r\n  hideNotice () {\r\n    document.documentElement.classList.remove(this._pluginPrefix + '-loaded')\r\n  }\r\n\r\n  //MODAL ==============================================================================================================\r\n\r\n  buildModal () {\r\n    // if (modalLoaded) {\r\n    //   return false\r\n    // }\r\n\r\n    // Load modal template\r\n    let modalHtml = this.getTemplateHtml('modal', Object.assign({}, locales[this._locale]['modal']))\r\n\r\n    // Append modal into body\r\n    document.body.insertAdjacentHTML('beforeend', modalHtml)\r\n\r\n    // Get empty category list\r\n    let categoryList = document.querySelector('.' + this._pluginPrefix + '-modal-cookies')\r\n\r\n    //Load essential cookies\r\n    categoryList.innerHTML += this.getTemplateHtml(\r\n      'category',\r\n      Object.assign(\r\n        {},\r\n        locales[this._locale]['category']['essential'],\r\n        {\r\n          prefix: 'cookie_essential',\r\n          checked: 'checked=\"checked\"'\r\n        }\r\n      )\r\n    )\r\n    let input = document.querySelector('.' + this._pluginPrefix + '-modal-cookie-input')\r\n    let label = document.querySelector('.' + this._pluginPrefix + '-modal-cookie-input-switch')\r\n    label.innerHTML = locales[this._locale]['category']['essential']['always_on']\r\n    label.classList.add(this._pluginPrefix + '-modal-cookie-state')\r\n    label.classList.remove(this._pluginPrefix + '-modal-cookie-input-switch')\r\n    input.remove()\r\n\r\n    for (let catId in this._categories) {\r\n      categoryList.innerHTML += this.getTemplateHtml(\r\n        'category',\r\n        Object.assign(\r\n          {},\r\n          locales[this._locale]['category'][catId],\r\n          {\r\n            prefix: 'cookie_' + catId,\r\n            checked: this._isCategoriesCheckedByDefault || (this._gdprCookie.isExists() && this._gdprCookie.get()[catId])\r\n              ? 'checked=\"checked\"'\r\n              : ''\r\n          }\r\n        )\r\n      )\r\n    }\r\n\r\n    // Load click functions\r\n    this.setModalEventListeners()\r\n\r\n    // Make sure modal is only loaded once\r\n    // modalLoaded = true\r\n  }\r\n\r\n  showModal () {\r\n    this.buildModal()\r\n    document.documentElement.classList.add(this._pluginPrefix + '-show-modal')\r\n  }\r\n\r\n  hideModal () {\r\n    document.documentElement.classList.remove(this._pluginPrefix + '-show-modal')\r\n  }\r\n\r\n  // Click functions in the modal\r\n  setModalEventListeners () {\r\n    let closeButton = document.querySelectorAll('.' + this._pluginPrefix + '-modal-close')[0]\r\n    let statementButton = document.querySelectorAll('.' + this._pluginPrefix + '-modal-footer-item-statement')[0]\r\n    let categoryTitles = document.querySelectorAll('.' + this._pluginPrefix + '-modal-cookie-title')\r\n    let saveButton = document.querySelectorAll('.' + this._pluginPrefix + '-modal-footer-item-save')[0]\r\n\r\n    closeButton.addEventListener('click', (e) => {\r\n      this.hideModal()\r\n      return false\r\n    })\r\n\r\n    statementButton.addEventListener('click', (e) => {\r\n      e.preventDefault()\r\n      window.open(\r\n        this._statementUrl,\r\n        '_blank'\r\n      )\r\n    })\r\n\r\n    for (let i = 0; i < categoryTitles.length; i++) {\r\n      categoryTitles[i].addEventListener('click', (e) => {\r\n        e.currentTarget.parentNode.parentNode.classList.toggle('open')\r\n        return false\r\n      })\r\n    }\r\n\r\n    saveButton.addEventListener('click', (e) => {\r\n      e.preventDefault()\r\n      saveButton.classList.add('saved')\r\n      window.setTimeout(() => {\r\n        saveButton.classList.remove('saved')\r\n      }, 1000)\r\n\r\n      let categorySettings = {}\r\n\r\n      for (let catId in this._categories) {\r\n        categorySettings[catId] = document.getElementById(this._pluginPrefix + '-cookie_' + catId).checked\r\n      }\r\n\r\n      this.acceptCategories(\r\n        !!this._categories.performance && document.getElementById(this._pluginPrefix + '-cookie_performance').checked,\r\n        !!this._categories.analytics && document.getElementById(this._pluginPrefix + '-cookie_analytics').checked,\r\n        !!this._categories.marketing && document.getElementById(this._pluginPrefix + '-cookie_marketing').checked\r\n      )\r\n      window.setTimeout(() => {\r\n        this.hideModal()\r\n      }, 1000)\r\n    })\r\n\r\n  }\r\n\r\n  //COOKIE =============================================================================================================\r\n\r\n  // deleteCookies (savedCookies) {\r\n  //   for (let i in this._categories) {\r\n  //     if (Object.keys(savedCookies).indexOf(i) >= 0 || !savedCookies[i]) {\r\n  //       Cookies.remove(i)\r\n  //     }\r\n  //   }\r\n  //\r\n  //   if (!savedCookies) {\r\n  //     this.showNotice()\r\n  //   } else {\r\n  //     this.hideNotice()\r\n  //   }\r\n  // }\r\n\r\n  acceptCategories (isPerformanceAccepted, isAnalyticsAccepted, isMarketingAccepted) {\r\n    console.log('categorySettings', isPerformanceAccepted, isAnalyticsAccepted, isMarketingAccepted)\r\n\r\n    // let value = {\r\n    //   date: new Date(),\r\n    //   necessary: true,\r\n    // }\r\n\r\n    // If request was coming from the modal, check for the settings\r\n    // if (save) {\r\n    //   for (var i = 0; i < categories.length; i++) {\r\n    //     value[categories[i]] = document.getElementById(pluginPrefix + '-cookie_' + categories[i]).checked\r\n    //   }\r\n    // }\r\n\r\n    // Cookies.set(this._namespace, value, {expires: this._expiration, domain: this._domain})\r\n    // this.deleteCookies(value)\r\n\r\n    // Load marketing scripts that only works when cookies are accepted\r\n    this._gdprCookie.set(\r\n      true,\r\n      isPerformanceAccepted,\r\n      isAnalyticsAccepted,\r\n      isMarketingAccepted\r\n    )\r\n    this._gdprCookiesEnabledEvt = new CustomEvent('gdprCookiesEnabled', {detail: this._gdprCookie.get()})\r\n    document.dispatchEvent(this._gdprCookiesEnabledEvt)\r\n\r\n    if (this._gdprCookie.isExists() && this._gdprCookie.isNecessaryAccepted()) {\r\n      this.hideNotice()\r\n    } else {\r\n      this.showNotice()\r\n    }\r\n  }\r\n\r\n  // getCurrentCookieSelection () {\r\n  //   return Cookies.getJSON(this._namespace)\r\n  // }\r\n\r\n  getTemplateHtml (templateKey, data) {\r\n    let templateStr = template[templateKey]\r\n\r\n    // console.log('templateStr', templateStr, data)\r\n\r\n    if (typeof templateStr === 'string' && (data instanceof Object)) {\r\n      return templateStr.replace(/{{([^}]+)}}/g, function (i, j) {\r\n        if (data[j]) {\r\n          return data[j]\r\n        } else {\r\n          return i\r\n        }\r\n      })\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  //GETTER - SETTER ====================================================================================================\r\n\r\n  set statementUrl (statementUrl) {\r\n    this._statementUrl = statementUrl\r\n  }\r\n\r\n  get statementUrl () {\r\n    return this._statementUrl\r\n  }\r\n\r\n  set implicit (isImplicit) {\r\n    this._implicit = isImplicit\r\n  }\r\n\r\n  get implicit () {\r\n    return this._implicit\r\n  }\r\n\r\n  set cookiesAccepted (isAccepted) {\r\n    this._cookiesAccepted = isAccepted\r\n  }\r\n\r\n  get cookiesAccepted () {\r\n    return this._cookiesAccepted\r\n  }\r\n\r\n  set categories (categories) {\r\n    this._categories = categories\r\n  }\r\n\r\n  get categories () {\r\n    return this._categories\r\n  }\r\n\r\n  set locale (locale) {\r\n    this._locale = locale\r\n  }\r\n\r\n  get locale () {\r\n    return this._locale\r\n  }\r\n\r\n  set timeout (timeout) {\r\n    this._timeout = timeout\r\n  }\r\n\r\n  get timeout () {\r\n    return this._timeout\r\n  }\r\n\r\n  set domain (domain) {\r\n    this._domain = domain\r\n  }\r\n\r\n  get domain () {\r\n    return this._domain\r\n  }\r\n\r\n  set expiration (expiration) {\r\n    this._expiration = expiration\r\n  }\r\n\r\n  get expiration () {\r\n    return this._expiration\r\n  }\r\n\r\n  set isCategoriesCheckedByDefault (isCategoriesCheckedByDefault) {\r\n    this._isCategoriesCheckedByDefault = isCategoriesCheckedByDefault\r\n  }\r\n\r\n  get isCategoriesCheckedByDefault () {\r\n    return this._isCategoriesCheckedByDefault\r\n  }\r\n\r\n  set namespace (namespace) {\r\n    this._namespace = namespace\r\n  }\r\n\r\n  get namespace () {\r\n    return this._namespace\r\n  }\r\n\r\n  set pluginPrefix (pluginPrefix) {\r\n    this._pluginPrefix = pluginPrefix\r\n  }\r\n\r\n  get pluginPrefix () {\r\n    return this._pluginPrefix\r\n  }\r\n}\r\n\r\n// export default { gdprCookieNotice }\r\nexport default {GdprCookieNotice}"]}