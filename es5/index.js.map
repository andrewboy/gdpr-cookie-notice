{"version":3,"sources":["../src/index.js"],"names":["gdprCookieNotice","locales","extOpts","defOpts","locale","timeout","domain","expiration","defaultChecked","namespace","pluginPrefix","opts","Object","assign","categories","currentCookieSelection","getCookie","console","log","hu","template","showNotice","buildNotice","document","body","insertAdjacentHTML","getTemplateHtml","templateKey","data","templateStr","replace","i","j","Cookies","getJSON"],"mappings":";;;;;QAKgBA,gB,GAAAA,gB;;AALhB;;;;AACA;;IAAYC,O;;AACZ;;;;AACA;;;;;;AAEO,SAASD,gBAAT,CAA2BE,OAA3B,EAAoC;AACzC,MAAIC,UAAU;AACZC,YAAQ,IADI;AAEZC,aAAS,GAFG;AAGZC,YAAQ,IAHI;AAIZC,gBAAY,EAJA;AAKZC,oBAAgB,KALJ;AAMZC,eAAW,kBANC;AAOZC,kBAAc;AAPF,GAAd;AASA,MAAIC,OAAOC,OAAOC,MAAP,CAAc,EAAd,EAAkBV,OAAlB,EAA2BD,OAA3B,CAAX;;AAEA,MAAIY,aAAa,EAAjB;AACA,MAAIC,yBAAyBC,WAA7B;;AAEAC,UAAQC,GAAR,CAAY,kBAAZ,EAAgCjB,OAAhC,EAAyCA,QAAQkB,EAAjD,EAAqDC,kBAArD;AACAH,UAAQC,GAAR,CAAYH,sBAAZ;;AAEA;AACEM;AACF;AACA;AACA;;AAEA,WAASA,UAAT,GAAuB;AACrBC;;AAEA;AACA;AACA;AACD;;AAED,WAASA,WAAT,GAAwB;AACtBC,aAASC,IAAT,CAAcC,kBAAd,CAAiC,WAAjC,EAA8CC,gBAAgB,KAAhB,EAAuBzB,QAAQU,KAAKP,MAAb,CAAvB,CAA9C;AACD;;AAED,WAASsB,eAAT,CAA0BC,WAA1B,EAAuCC,IAAvC,EAA6C;AAC3C,QAAIC,cAAcT,mBAASO,WAAT,CAAlB;;AAEAV,YAAQC,GAAR,CAAY,aAAZ,EAA2BW,WAA3B,EAAwCD,IAAxC;;AAEA,QAAI,OAAOC,WAAP,KAAuB,QAAvB,IAAoCD,gBAAgBhB,MAAxD,EAAiE;AAC7D,aAAOiB,YAAYC,OAAZ,CAAoB,cAApB,EAAoC,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AACzD,YAAIJ,KAAKI,CAAL,CAAJ,EAAa;AACX,iBAAOJ,KAAKI,CAAL,CAAP;AACD,SAFD,MAEO;AACL,iBAAOD,CAAP;AACD;AACF,OANM,CAAP;AAOH,KARD,MAQO;AACL,aAAO,KAAP;AACD;AACF;;AAED,WAASf,SAAT,GAAsB;AACpB,WAAOiB,mBAAQC,OAAR,CAAgBvB,KAAKF,SAArB,CAAP;AACD;AACF","file":"index.js","sourcesContent":["import { default as template } from './template'\r\nimport * as locales from './locales'\r\nimport Cookies from 'js-cookie'\r\nimport './sass/main.scss'\r\n\r\nexport function gdprCookieNotice (extOpts) {\r\n  let defOpts = {\r\n    locale: 'hu',\r\n    timeout: 500,\r\n    domain: null,\r\n    expiration: 30,\r\n    defaultChecked: false,\r\n    namespace: 'gdprcookienotice',\r\n    pluginPrefix: 'gdpr-cookie-notice'\r\n  }\r\n  let opts = Object.assign({}, defOpts, extOpts)\r\n\r\n  let categories = []\r\n  let currentCookieSelection = getCookie()\r\n\r\n  console.log('gdprCookieNotice', locales, locales.hu, template)\r\n  console.log(currentCookieSelection)\r\n\r\n  // if (!currentCookieSelection) {\r\n    showNotice()\r\n  // } else {\r\n  //\r\n  // }\r\n\r\n  function showNotice () {\r\n    buildNotice()\r\n\r\n    // setTimeout(function(){\r\n    //   document.documentElement.classList.add(pluginPrefix+'-loaded');\r\n    // }, config.timeout);\r\n  }\r\n\r\n  function buildNotice () {\r\n    document.body.insertAdjacentHTML('beforeend', getTemplateHtml('bar', locales[opts.locale]))\r\n  }\r\n\r\n  function getTemplateHtml (templateKey, data) {\r\n    let templateStr = template[templateKey]\r\n\r\n    console.log('templateStr', templateStr, data)\r\n\r\n    if (typeof templateStr === 'string' && (data instanceof Object)) {\r\n        return templateStr.replace(/{{([^}]+)}}/g, function (i, j) {\r\n          if (data[j]) {\r\n            return data[j]\r\n          } else {\r\n            return i\r\n          }\r\n        })\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  function getCookie () {\r\n    return Cookies.getJSON(opts.namespace)\r\n  }\r\n}"]}